/*!
 * captionify | semantic image caption generator library in pure JS
 *
 * Copyright 2015, Umar Bolatov
 * Released under the MIT license
 *
 * v0.1.0
 * Date: 2015-07-05
 */
(function(e){function c(j){var k={containerSelector:"body",dataCaption:false,figureClass:"imgFigure",figcaptionClass:"imgFigure__caption",imgClassSelector:"",mode:"overlay",inheritStyles:true,setFigureWidth:true};this.options=a(k,j);this._init()}c.prototype={_init:function(){var w=this.options,p=w.figcaptionClass,m="",o,k=w.containerSelector,v=w.dataCaption,u="",t=w.figureClass,r,j=w.imgClassSelector,q=w.inheritStyles,s="",n=w.mode,l=w.setFigureWidth;o=f(k);if(o.length>0){r=b(o,j);if(r.length>0){r.forEach(function(A,y,D){s="";m=v?h(A,"data-caption"):A.alt;u=h(A,"data-link");if(m&&m.length>0){var z=document.createElement("figcaption"),x=document.createElement("figure");if(u&&u.length>0){s=document.createElement("a");s.href=u;s.textContent=m}x.className=t;if(n&&n==="bottom"){var C=p+" "+p+"--bottom";z.className=C}else{z.className=p}if(l){x=d(A,x);A.removeAttribute("width")}if(q){var B=h(A,"style");if(B){A.removeAttribute("style");x.setAttribute("style",B)}}i(x,A);if(s){z.appendChild(s)}else{z.textContent=m}g(z,A)}})}}}};function a(k,j){if(j){Object.keys(j).forEach(function(l){k[l]=j[l]})}return k}function h(j,k){return j.getAttribute(k)||false}function f(j){return document.querySelectorAll(j)}function b(m,k){var l=[],j="img";Array.prototype.forEach.call(m,function(n){if(k){j+="."+k}var o=n.querySelectorAll(j);l.push.apply(l,o)});return l}function g(k,j){j.parentNode.insertBefore(k,j.nextSibling)}function d(l,j){var k=h(l,"width");if(k&&k.substr(k.length-2)==="px"){j.style.width=k}return j}function i(j,o){if(!o.length){o=[o]}for(var k=o.length-1;k>=0;k--){var p=(k>0)?j.cloneNode(true):j;var n=o[k];var m=n.parentNode;var l=n.nextSibling;p.appendChild(n);if(l){m.insertBefore(p,l)}else{m.appendChild(p)}}}e.Captionify=c})(window);