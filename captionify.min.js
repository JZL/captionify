/*!
 * captionify | semantic image caption generator library in pure JS
 *
 * Copyright 2015, Umar Bolatov
 * Released under the MIT license
 *
 * v0.1.0
 * Date: 2015-07-05
 */
!function(a){"use strict";function b(a){this.options=a=c({},a);var b={containerSelector:"body",dataCaption:!1,figureClass:"imgFigure",figcaptionClass:"imgFigure__caption",imgClassSelector:"",mode:"overlay",inheritStyles:!0,setFigureWidth:!0};for(var d in b)d in a||(a[d]=b[d]);this._init()}function c(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){return a.hasAttribute(b)?b=a.getAttribute(b):!1}function e(a){var b,c=a.substring(0,1),d=a.substring(1);return b="."===c?document.getElementsByClassName(d):"#"===c?[document.getElementById(d)]:document.getElementsByTagName(a)}function f(a,b){var c,d=[];return a=Array.prototype.slice.call(a),a.forEach(function(a,e,f){c=b?a.getElementsByClassName(b):a.getElementsByTagName("img"),c=Array.prototype.slice.call(c);for(var g=c.length-1;g>=0;g--)d.push(c[g])}),d}function g(a,b){b.parentNode.insertBefore(a,b.nextSibling)}function h(a,b){var c=d(a,"width");return c&&"px"===c.substr(c.length-2)&&(b.style.width=c),b}function i(a,b){b.length||(b=[b]);for(var c=b.length-1;c>=0;c--){var d=c>0?a.cloneNode(!0):a,e=b[c],f=e.parentNode,g=e.nextSibling;d.appendChild(e),g?f.insertBefore(d,g):f.appendChild(d)}}b.prototype={_init:function(){var a,b,c=this.options,j=c.figcaptionClass,k="",l=c.containerSelector,m=c.dataCaption,n="",o=c.figureClass,p=c.imgClassSelector,q=c.inheritStyles,r="",s=c.mode,t=c.setFigureWidth;a=e(l),a.length>0&&(b=f(a,p),b.length>0&&b.forEach(function(a,b,c){if(r="",k=m?d(a,"data-caption"):a.alt,n=d(a,"data-link"),k&&k.length>0){var e=document.createElement("figcaption"),f=document.createElement("figure");if(n&&n.length>0&&(r=document.createElement("a"),r.href=n,r.textContent=k),f.className=o,s&&"bottom"===s){var l=j+" "+j+"--bottom";e.className=l}else e.className=j;if(t&&(f=h(a,f),a.removeAttribute("width")),q){var p=d(a,"style");p&&(a.removeAttribute("style"),f.setAttribute("style",p))}i(f,a),r?e.appendChild(r):e.textContent=k,g(e,a)}}))}},a.Captionify=b}(window);